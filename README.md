Darren "Chas" Hamel

------------------------------------
SETUP TO RUN PROGRAM

The Pipfile for this program includes the following packages. These should all be installed using the following command:

PIPENV INSTALL {package_name}.

{package_name}
-nltk
-numpy
-spacy
-pytest
-argparse
-re
-commonregex 

------------------------------------
PROJECT FUNCTIONALITY



https://user-images.githubusercontent.com/120272276/230552543-a4a43f85-2e28-4e15-889e-2b84830352ce.mov



------------------------------------
HOW TO RUN PROJECT 1

Add .txt or other text file extensions to the main project folder, cs5293sp23-project1/, in this case that need to be reviewed and
have critical information redacted from.

With the text files loaded, run the following code in the command line.

pipenv run python redactor.py --input '*.txt' --names --dates --phones --genders -- address --output 'files/' --stats stderr

Using this command, the redactor.py program will run using the glob input '*.txt'. The input can be modified accordingly.
Additionally, the data types that shall be reviewed and redacted can be removed / added as required.
For example, if you only want to redact names from the input files, you would run the following command:

pipenv run python redactor.py --input '*.txt' --names  --output 'files/' --stats stderr 

Continuing, the path defined after '--output' will be the output path for all files containing redacted information. 'files/' should
be used in this case.

Finally, statistcs on redacted text will be run for each file. Included will be the number of items redacted, per input category, for each input file.
These statistics will be contained in a 'stats.txt' file in the 'docs/' filepath.

------------------------------------

PROGRAM OVERVIEW

The redactor.py program takes in inputs from the initial 'pipenv run' command and executes methods defined in the main.py program based on
inputs received in the initial command.

Within redactor.py, we use argparse to take in the "--{input parameter}" input parameters into an input list  and generate a list for each input type
within. 

--input_list --> List of all input parameters given containing all or part of:
     --input, --names, --dates,--phones, --genders, -- address, --output, --stats, etc

--input_path --> This list will contain all files input into the program via "--input" that shall be reviewed and redacted.
--flags --> This list will contain all input flags of text categories that shall be reviewed and redacted, ex. --names, --dates, etc.
--output_path --> This list will contain the file path for all redacted output files. This is input to the program via "--output".
--stats_list --> This list will contain the "stderr" flag input via the "--stats" input flag.

Taking the input_list array, we use glob.glob to gather all files meeting the glob criteria into an input_files array.

Using a for loop, we loop through the input_files list generated by the glob to begin the core redaction processes.

For each input_file, we assign the text data in the file to the "data" parameter and cycle through each "flag" found in the "flag" list
Using this, we execute the resultant method in main.py for this flag.

    --names
        If --names is found in the "flags" list, main.py will take in the text data stored in the "data" parameter and input it into
        the REDACT_NAMES method. Using the nltk package, we tokenize the words in the text file, apply part of speech tags to each of these tokens, 
        and then use ne_chunk to itentify "PERSON" tags, which are stored into a name_list.

    --genders
        If --genders is found in the "flags" list, main.py will take in the text data stored in the "data" parameter and input it into
        the REDACT_GENDERS method. This method contains a list of gender identifying terms that will be used in a later method for redaction.

    --dates
        If --dates is found in the "flags" list, main.py will take in the text data stored in the "data" parameter and input it into
        the REDACT_DATES method. This method uses CommonRegex to generate a list of dates in various formats in the text file. These dates are
        then appended into a dates_list.

    --phones
        If --phones is found in the "flags" list, main.py will take in the text data stored in the "data" parameter and input it into
        the REDACT_PHONES method. Similar to the REDACT_DATES method, this method uses CommonRegex to assimilate a list of phone numbers found in the 
        text file into a phone_list.

    --address
        If --address is found in the "flags" list, main.py will take in the text data stored in the "data" parameter and input it into
        the REDACT_ADDRESS method. Similar to the REDACT_NAMES method, this method uses nltk tokenization, POS, and chunk to find locations
        tagged with "GPE". These locations are then stored in a location_list.

Now that all input flag parameter methods have been executed, the redactor.py program calls the REDACT_DATA method from main.py, with our text
data file as the input data.

Using the max 5 arrays generated from the input flag methods, the REDACT_DATA concatenates the various arrays and replaces each array element
with the UNICODE Block '\u2588' in the text data file. The output of this method is text data containing both text and the Unicode block.

The redactor.py program now takes this redacted data and generates a new text file using the input files name and adds ".redacted" at the end.

The final step of the program will take this new file and move it to the location defined in the --output flag (output_list).

------------------------------------

STATISTICS OVERVIEW

Within the redactor.py and main.py there are methods to extract various statistics of the redacted data.
For each flag captured in the "flags" array, the STATS method in main.py will build a statistics string showing the number of items redacted from
each flag category.

This will occur for each input file and will be appended into a single stats.txt file that is stored in the "docs/" folder.

------------------------------------

TEST OVERVIEW

To test the functionality of the program, a test_redactor.py is stored in the "tests/" folder. In this, we are testing the functionality of
the following methods;
    TEST_NAMES: REDACT_NAMES,
    TEST_GENDERS: REDACT_GENDERS,
    TEST_DATES: REDACT_DATES,
    TEST_PHONES: REDACT_PHONES,
    TEST_ADDRESSES: REDACT_ADDRESS,
    TEST_REDACTION: REDACT_DATA,
    TEST_STATISTICS: STATS

To run the test_redactor.py, pytest shall be installed as defined in the "SETUP TO RUN PROGRAM" section of this README.

Once installed, run "pipenv run python -m pytest" from the top level project folder.

In the test_redactor.py program, there are standard input strings or arrays for data, names, genders, dates, phone, and location. These standards
are used as constant inputs to test the various methods.

    TEST_NAMES --> This method creates a list of names from the data string after it is executed in main.redact_names. The input string has 2 names,
    "John Smith" and "Peyton Manning". We assert TRUE if the length of the list of names is 2.

    TEST_GENDERS --> This method creates a list of genders from the data string after it is executed in main.redact_genders. The input string 
    has 27 gender identifiers. We assert TRUE if the length of the list of genders is 27.

    TEST_DATES --> This method creates a list of dates from the data string after it is executed in main.redact_dates. The input string 
    has 2 dates, "July 4, 1989' and  'November 20, 1970'. We assert TRUE if the length of the list of dates is 2.

    TEST_PHONES --> This method creates a list of phone numbers from the data string after it is executed in main.redact_phones. The input string 
    has 1 phone number, "(281)-330-8004'. We assert TRUE if the length of the list of phone numbers is 1.

    TEST_ADDRESSES --> This method creates a list of locations from the data string after it is executed in main.redact_address. The input string 
    has 1 location, "COLORADO". We assert TRUE if the length of the list of locations is 1.

    TEST_REDACTION --> This method takes the standard inputs and passes them to the main.redact_data method. From this, we should have data that
    includes both text and Unicode block u2588. We confirm the instance of the Unicode block in the output of the redact_data method and assert
    TRUE if it is found.

    TEST_STATISTICS --> This method takes the standard inputs and passes them to the main.stats method. This method will take the inputs and append
    the text data to a stats string. If the stats string is created, we assert TRUE.


------------------------------------

COLLABORATIONS

As found in the COLLABORATORS file, I used the following resorces for this project

How to use sys.argv in Pything | https://www.geeksforgeeks.org/how-to-use-sys-argv-in-python/ | Referenced this website to understand how to take the pr>

WHAT is "Glob" In Python?! (It's Actually Very Useful!) | https://www.youtube.com/watch?v=tATFQUx0Zx0 | Used this video to understand how to use Glob

re â€” Regular expression operations | https://docs.python.org/3/library/re.html | General reference for regular expressions in Python

NLTK Documentation | https://www.nltk.org/data.html | Referenced this website as I was having issues with NLTK on the VM when I was not seeing the same >

Udemy: The Complete Python Bootcamp by Jose Portilla | https://www.udemy.com/course/complete-python-bootcamp/learn/lecture/20568984?start=315#overview |>

Eric Matthes | Python Crash Course 2nd Edition | Book I use for in depth Python methods. Specifically used for learning to write methods in Python.

Jasmine Dehart & Bavya Reddy Kanuganti | Email from April 3 looking for suggestions on how to handle program functionality between VM and personal lapto>


------------------------------------

BUGS AND ASSUMPTIONS

This is not necessarily a bug, but, I was not able to figure out how to test input files of different file extensions. Thus, this functionality may
not work as expected.

